# data_processing
- **Version**: V2.2.1

## 作者

- **Author**: Zhang Yuetao
- **GitHub**: [VerySeriousMan](https://github.com/VerySeriousMan)

## 版本更新日志
### V2.2.1（2025.03.04）
1. **修复配置参数BUG**
### V2.2（2025.03.03）
1. **优化图像查重功能**
   - ① 增加可选按钮进行各子文件夹单独查重
   - ② 增加可选配置选择是否保存查重信息txt
   - ③ 优化去重后存储文件夹格式，保留文件夹名
   - ④ 优化查重速率，在100%相似度时采用MD5查重，简化计算
2. **更新测试集**
### V2.1（2025.01.08）
1. **增加ID信息补充功能**
   - ① 在集合划分界面增加ID信息补充选项框，可勾选选择是否自动补全各ID的年龄与身高信息
   - ② 增加id_info.json配置参数，若信息缺失默认为X
   - ③ 若已输入有效的输入信息会保持不变，若无有效信息会自动补全，若需补全但信息缺失会默认修改为X
### V2.0（2025.01.08）
1. **重构代码结构**
   - ① 拆分与调整工具类函数，按功能分类归于utils文件夹，合并部分函数实现，并编写__init__.py统一外部接口
   - ② 拆分与调整核心功能实现函数，按功能分类归于core文件夹，并编写__init__.py统一外部接口
   - ③ 拆分服务器交互与软件更新相关函数，归于network文件夹
   - ④ 将Gui相关界面与实现功能和拆分主文件相关部分，归于ui文件夹
   - ⑤ 优化config.py，将全部路径导入配置，默认参数，MAP对应与文件加载等相关函数移到此处
2. **重构各功能运行函数，拆分工作线程**
   - ① 建立统一的工作线程类，将各项子功能运行全都移植到工作线程中，分离前台页面与后台运行，将全部耗时操作转移到工作线程，防止前台运行卡死
   - ② 各子功能使用统一的工作线程接口，简化代码，便于维护
   - ③ 设立线程监督机制，运行操作时检查工作线程是否已在运行，结束操作与关闭软件时，确保线程及时被正常释放
   - ④ 细化过程提示与失败类别
3. **增加用户反馈功能**
   - ① 在菜单栏中增加用户反馈功能，用户可选择反馈类型与输入需要反馈的内容，一键提交至服务器后台，反馈文件按类别与时间戳命名
   - ② 自动服务器连接检测：点击反馈功能时会自动检测服务器连接情况
4. **优化属性修改输入**
   - ① 增加输入可为空按键，新属性为空值用于删除相关属性
5. **优化运行提示**
   - ① 各子功能运行时会实时滚动播放运行中动画
   - ② 增加开始运行提示与问题输出
6. **优化图片添加水印功能**
   - ① 参数配置按键：可自定义各类参数配置，包括水印位置，大小，颜色，文字参数，统计数字格式等
   - ② 参数检验，参数修改时实时检测合理性并提示
   - ③ 保存类型配置，配置文件中可选择直接覆盖或另存与新文件夹内
7. **编写自动化工具**
   - ① auto_generate_init：自动生成指定文件夹下指定格式的init文件，自动输出函数接口
   - ② auto_init_python_file：自动在指定文件夹下初始化生成指定格式的python文件
   - ③ auto_update_ctime：自动更新全部修改过代码的update time

### V1.7（2024.11.19）
1. **新增软件自动更新功能**
   - ① 自动版本检测：打开软件后会自动检测服务器连接情况，若成功连接，会进行版本比对以判断是否需要更新
   - ② 自动更新：需要更新情况下，打开软件时会自动弹出信息，用户可选择是否立即更新，更新时软件会自动进行新版本所需全部文件的下载、替换
   - ③ 自动切换到新版本：软件更新完毕后，会自动切换到新版本软件并删除旧版本内容，并弹出更新日志，用户可正常使用新版本软件
2. **新增菜单栏与版本检测功能功能**
   - ① 用户可点击菜单栏中版本检查功能进行软件版本检测与更新

### V1.6（2024.10.17）
1. **增加了图片预分类功能：**
   - ① 用户可一键对文件夹下全部图片进行分类，分类后保存原文件夹格式
   - ② 基于k-means++算法，用户可选择分类方式（按创建时间，按修改时间，按图片相似度）与分类数进行预分类
   - ③ 用户可选择输入对应下划线数进行按文件名分类
2. **对各函数增加参数注释**
3. **优化界面布局：**
   - ① 将各子页面提示信息颜色改为灰色，便于与主信息区分
   - ② 优化软件按键间隔

### V1.5（2024.09.29）
1. **增加了图片添加水印功能：**
   - ① 用户可一键添加文件夹名_额外内容（可选）_编号（可选）的水印
   - ② 添加配置文件watermark_attr.toml：用户可自定义
水印位置与距离边缘像素值、字体类型、字体缩放比例、字体颜色、 字体粗细、线条类型、水印不透明度、编号格式

### V1.4.1（2024.08.07）
1. **优化界面显示，增加界面整体自适应缩放，适配不同的分辨率，解决在高分辨率显示器下文字过小的问题**

### V1.4（2024.07.19）
1. **优化了界面与按键合理性：**
   - ① 添加Qwidget分页框架，将数据预处理内容划分为5大功能页面
   - ② 合并ID修改与属性修改，合并两个文件夹导入，简化数据操作
   - ③ 丰富与完善提示信息，增加输入检测
   - ④ 增加按键保护，在打开文件夹后，才能使用其他控件
2. **增加了新的功能：**
   - ① 增加文件查重功能，并可自定义修改相似度，可选择自查重与对比查重，选择对比查重后，
才会显示打开对比文件夹按键
   - ② 增加错误数据检测功能，并且：<br>
（1）导入文件与修改内容后，都会自动进行多余空格删除与身份证x转X；<br>
（2）修改文件后，会检测文件名中的中文与错误属性，并导出问题数据地址txt<br>
   - ③ 文件查重可根据setting选择去重或保存唯一图像，并生成重复图像的txt以供检查
   - ④ 增加错误数据修改功能，点击按键后会进入错误修改界面
3. **错误数据修改界面：**
   - ① 自动错误数据txt导入，若主界面生成错误数据txt，会自动进行导入，若无，可自主导入txt
   - ② 自动实时显示当前处理数据地址，剩余数据数量，并在修改输入框中自动导入当前处理文件名
   - ③ 可选择单张处理与批量处理，对于批量处理，软件会通过文件地址正则化比对排除，
找到同类文件进行批量同时处理
   - ④ 具有修改按键与跳过按键，可选择是否进行修改
4. **增加外部配置文件：**
   - ① visible控制控件可见性，分全部功能可见与部分功能可见
   - ② dedup_cover控制查重后直接删除重复数据或将查重后文件导入新文件夹
   - ③ space_enabled与Idcard控制多余空格删除和身份证x转X的自动检测与修复
   - ④ project_name控制导入项目类型，以匹配对应数据检测与正则化匹配
5. **优化代码架构与代码效率：**
6. **软件打包spec编写**